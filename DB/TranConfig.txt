头部：
if object_id('tempdb..#temp_TranConfig') is not null drop table #temp_TranConfig;select top 0 [Guid]      ,[Name]      ,[Code]      ,[Sort]      ,[MaxCount]      ,[Direct]      ,[HeaderSql]      ,[DetailSql]      ,[FooterSql]      ,[Remark]      ,[Status]      ,[CreatedTime]      ,[CreatedBy]      ,[ModifiedTime]      ,[ModifiedBy] into #temp_TranConfig from TranConfig(nolock);

Sql体：

select top $rowCount$ 'insert #temp_TranConfig select '+ dbo.bims_f_var_to_string(Guid)+','+dbo.bims_f_var_to_string(Name)+','+dbo.bims_f_var_to_string(Code)  +','+dbo.bims_f_var_to_string(Sort)+','+dbo.bims_f_var_to_string(MaxCount)+','+dbo.bims_f_var_to_string(Direct) +','+dbo.bims_f_var_to_string(HeaderSql)+','+dbo.bims_f_var_to_string(DetailSql)+','+dbo.bims_f_var_to_string(FooterSql)+','+dbo.bims_f_var_to_string(Remark)+','+dbo.bims_f_var_to_string(Status)+','+dbo.bims_f_var_to_string(CreatedTime)+','+dbo.bims_f_var_to_string(CreatedBy)+','+dbo.bims_f_var_to_string(ModifiedTime)+','+dbo.bims_f_var_to_string(ModifiedBy) from TranConfig where [timestamp] > cast(cast($lastStamp$ as bigint) as timestamp);

Sql脚：
Update b set b.name = a.name,b.code = a.code ,b.sort = a.sort ,b.MaxCount = a.MaxCount,b.Direct = a.Direct ,b.HeaderSql = a.HeaderSql,b.DetailSql = a.DetailSql,b.FooterSql = a.FooterSql,b.remark = a.remark,b.Status = a.Status,b.CreatedBy = a.CreatedBy,b.CreatedTime = a.CreatedTime ,b.ModifiedBy = a.ModifiedBy,b.ModifiedTime = a.ModifiedTime from #temp_TranConfig a,TranConfig b  where a.Guid = b.Guid;if @@error <> 0 begin raiserror 20001 '更新配置出错';  rollback return end;insert into TranConfig([Guid]      ,[Name]      ,[Code]      ,[Sort]      ,[MaxCount]      ,[Direct]      ,[HeaderSql]      ,[DetailSql]      ,[FooterSql]      ,[Remark]      ,[Status]      ,[CreatedTime]      ,[CreatedBy]      ,[ModifiedTime])  select[Guid]      ,[Name]      ,[Code]      ,[Sort]      ,[MaxCount]      ,[Direct]      ,[HeaderSql]      ,[DetailSql]      ,[FooterSql]      ,[Remark]      ,[Status]      ,[CreatedTime]      ,[CreatedBy]      ,[ModifiedTime]  from #temp_TranConfig a   where a.Guid not in (Select [GUID] From TranConfig);if @@error <> 0 begin raiserror 20002 '更新配置出错';rollback return end;