头部：
if object_id('tempdb..#temp_Client') is not null drop table #temp_Client;select top 0 [GUID]      ,[Code]      ,[Name]      ,[Type]      ,[Address]      ,[Status]      ,[CreatedBy]      ,[CreatedTime]      ,[ModifiedBy]      ,[ModifiedTime] into #temp_Client from Client(nolock);

Sql体：

select top $rowCount$ 'insert #temp_Client select   '+dbo.bims_f_var_to_string(Guid)+','+dbo.bims_f_var_to_string(Name)+','+dbo.bims_f_var_to_string(Code)+','+dbo.bims_f_var_to_string(Type)+','+dbo.bims_f_var_to_string(Address)+','+dbo.bims_f_var_to_string(Status)+','+dbo.bims_f_var_to_string(CreatedTime)+','+dbo.bims_f_var_to_string(CreatedBy)+','+dbo.bims_f_var_to_string(ModifiedTime)+','+dbo.bims_f_var_to_string(ModifiedBy) from Client where [timestamp] > cast(cast($lastStamp$ as bigint) as timestamp);

Sql脚：
Update b set b.name = a.name,b.code = a.code, b.Type = a.Type,b.Address = a.Address ,b.Status = a.Status,b.CreatedBy = a.CreatedBy,b.CreatedTime = a.CreatedTime ,b.ModifiedBy = a.ModifiedBy,b.ModifiedTime = a.ModifiedTime from #temp_Client a,Client b  where a.Guid = b.Guid;if @@error <> 0 begin raiserror 20001 ''更新配置出错'';  rollback return end;insert into Client([GUID]      ,[Code]      ,[Name]      ,[Type]      ,[Address]      ,[Status]      ,[CreatedBy]      ,[CreatedTime]      ,[ModifiedBy]      ,[ModifiedTime]) select [GUID]      ,[Code]      ,[Name]      ,[Type]      ,[Address]      ,[Status]      ,[CreatedBy]      ,[CreatedTime]      ,[ModifiedBy]      ,[ModifiedTime]  from #temp_Client a   where a.Guid not in (Select [GUID] From Client);if @@error <> 0 begin raiserror 20002 ''更新配置出错'';rollback return end;